<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>White Penguin Solutions</title>
    <script defer="defer" src="static/js/main.308d43c8.js"></script>
    <link href="static/css/main.168a84df.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>

  <body>
    <div id="root"></div>

    <!-- Contact form handler injection for Google Apps Script webhook -->
    <script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzNZLBvqFgLVI_Y8oE4mxTVbv1HLn5T84GGrBRMOwv_TLc-jbL369IGnm_JEUOdjA9t/exec";

  document.addEventListener("DOMContentLoaded", () => {
    setTimeout(() => {
      // locate the contact form rendered by React
      let form =
        document.querySelector("form") ||
        document.getElementById("contact-form") ||
        document.querySelector("[data-contact-form]");

      if (!form) {
        console.warn("Contact form not found — contact handler not attached.");
        return;
      }

      if (form.__wpsAttached) return;
      form.__wpsAttached = true;

      // status element
      const statusBox = document.createElement("div");
      statusBox.style.marginTop = "12px";
      statusBox.style.fontSize = "14px";
      form.appendChild(statusBox);

      // helper to get field value
      const getVal = (name) => {
        const el = form.querySelector(`[name="${name}"]`);
        return el ? el.value.trim() : "";
      };

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const payload = {
          user_name: getVal("user_name") || getVal("name") || "",
          user_email: getVal("user_email") || getVal("email") || "",
          message: getVal("message") || getVal("body") || ""
        };

        statusBox.style.color = "black";
        statusBox.textContent = "Sending...";

        try {
          // build urlencoded body to avoid CORS preflight
          const urlEncoded = new URLSearchParams();
          urlEncoded.append("user_name", payload.user_name);
          urlEncoded.append("user_email", payload.user_email);
          urlEncoded.append("message", payload.message);

          const res = await fetch(SCRIPT_URL, {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: urlEncoded.toString()
          });

          // fetch will follow redirects; parse returned body
          const text = await res.text();
          // try parse JSON if possible
          let json;
          try { json = JSON.parse(text); } catch (err) { json = null; }

          if (res.ok && json && json.status === "success") {
            statusBox.style.color = "green";
            statusBox.textContent = "Thanks — we received your message. We will get back to you shortly.";
            form.reset();
          } else {
            // no JSON success — show returned text for debugging
            statusBox.style.color = "red";
            statusBox.textContent = "Error sending message. Try again later.";
            console.error("Apps Script response:", res.status, text);
          }
        } catch (err) {
          statusBox.style.color = "red";
          statusBox.textContent = "Network error. Try again later.";
          console.error("Network/fetch error:", err);
        }
      });
    }, 1500);
  });
</script>
  </body>
</html>
